(()=>{"use strict";var e,t,r,n={6011:(e,t,r)=>{var n=r(7294),a=r(3935),o=r(436),c=r(1859),i=r(5974),l=r(2445),u=r(6922);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var s=r(4942),f=r(8152),p=r(7036),d=r(1169);const g=(0,d.ZL)()((function(e){return{root:{height:"100vh",display:"flex",flexDirection:"column"},row:{display:"flex"},col:{margin:5,border:"1px solid black"},dropzone:{background:p.Z[900],height:190,width:190,display:"grid",gap:5,gridAutoRows:"minmax(100px, auto)"},things:{display:"flex",flexWrap:"wrap","& div *":{height:100,width:100,margin:5}},thing:{width:"100%",height:"100%",minHeight:30,minWidth:30,fontWeight:700,backgroundSize:"cover",display:"flex",justifyContent:"center",alignItems:"center"}}}));var m=r(5614),b=(0,d.ZL)()((function(e,t){return{root:{cursor:t.isDragging?"grabbing !important":"grab"}}}));const h=function(e){var t=e.children,r=(e.type,e.id),a=(0,m.c)((function(){return{type:"Draggable",item:{id:r},collect:function(e){return{isDragging:!!e.isDragging()}}}})),o=(0,f.Z)(a,2),c=o[0].isDragging,i=o[1],l=b({isDragging:c}).classes;return n.createElement("div",{className:l.root,ref:i},t)};var v=r(2452),y=(0,d.ZL)()((function(e,t){return{root:{background:t.isOver?"red":"white"}}}));const O=function(e){var t=e.children,r=(e.accept,e.onDrop),a=(0,v.L)((function(){return{accept:"Draggable",collect:function(e){return{isOver:e.isOver(),canDrop:e.canDrop()}},drop:r}})),o=(0,f.Z)(a,2),c=o[0],i=c.canDrop,l=c.isOver,u=o[1],s=y({isOver:l,canDrop:i}).classes;return n.createElement("div",{className:s.root,ref:u,role:"Dustbin"},t)},w=r.p+"d5304110ee0fc7554f93e0536ce4749b.jpg",j=r.p+"ae26d2d95dc2fc6b90e308f32a527736.png",E=r.p+"013a10a0775905d0a7e8229d6cc821ce.jpg",k=r.p+"1d9507260fdc9dd5ba64f6eff63258eb.jpg",D=r.p+"43597aaec6a54db82d82e10d6e8ccf0e.jpg",P=r.p+"c3b647c85f6a922e11681f803ed2afdd.jpg",x=r.p+"7f4778906897fc0157062197ddcf2ace.png",N=r.p+"7fb734cd4ff5acc9289175bca7baff7a.jpg",S=r.p+"0ca3122c54df6b5273f200b265a79e5a.jpg";function Z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var M=["Lawful","Neutral","Chaotic"],T=["Good","Neutral","Evil"],C=[w,j,E,k,D,P,x,N,S];const W=function(){var e=g().classes,t=n.useState(C),r=(0,f.Z)(t,2),a=r[0],o=r[1],c=n.useState({}),i=(0,f.Z)(c,2),l=i[0],u=i[1];return n.createElement("div",{className:e.root},M.map((function(t){return n.createElement("div",{key:t,className:e.row},T.map((function(r){var a=C.filter((function(e){return l[e]==="".concat(t).concat(r)}));return n.createElement(O,{key:"".concat(t).concat(r),onDrop:function(e,n){return function(e,t){u((function(r){return _(_({},r),{},(0,s.Z)({},t.id,e))})),o((function(e){return e.filter((function(e){return e!==t.id}))}))}("".concat(t).concat(r),e)}},n.createElement("div",null,t," ",r),n.createElement("div",{className:e.col},n.createElement("div",{className:e.dropzone,style:{gridTemplateColumns:"repeat(".concat(Math.ceil(Math.sqrt(a.length)),", 1fr)"),gridTemplateRows:"repeat(".concat(Math.ceil(Math.sqrt(a.length)),", 1fr)")}},a.map((function(t){return n.createElement(h,{id:t,key:t},n.createElement("div",{className:e.thing,style:{backgroundImage:"url(".concat(t,")")}}))})))))})))})),n.createElement("div",{className:e.things},a.map((function(t){return n.createElement(h,{id:t,key:t},n.createElement("div",{className:e.thing,style:{backgroundImage:"url(".concat(t,")")}}))}))))},L=(0,r(2161).Z)({});var I=(0,c.default)({key:"mui",prepend:!0});a.render(n.createElement(o.C,{value:I},n.createElement(i.Z,{theme:L},n.createElement(u.W,{backend:l.PD},n.createElement(W,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},a={};function o(e){var t=a[e];if(void 0!==t)return t.exports;var r=a[e]={exports:{}};return n[e].call(r.exports,r,r.exports,o),r.exports}o.m=n,e=[],o.O=(t,r,n,a)=>{if(!r){var c=1/0;for(s=0;s<e.length;s++){for(var[r,n,a]=e[s],i=!0,l=0;l<r.length;l++)(!1&a||c>=a)&&Object.keys(o.O).every((e=>o.O[e](r[l])))?r.splice(l--,1):(i=!1,a<c&&(c=a));if(i){e.splice(s--,1);var u=n();void 0!==u&&(t=u)}}return t}a=a||0;for(var s=e.length;s>0&&e[s-1][2]>a;s--)e[s]=e[s-1];e[s]=[r,n,a]},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},r=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,o.t=function(e,n){if(1&n&&(e=this(e)),8&n)return e;if("object"==typeof e&&e){if(4&n&&e.__esModule)return e;if(16&n&&"function"==typeof e.then)return e}var a=Object.create(null);o.r(a);var c={};t=t||[null,r({}),r([]),r(r)];for(var i=2&n&&e;"object"==typeof i&&!~t.indexOf(i);i=r(i))Object.getOwnPropertyNames(i).forEach((t=>c[t]=()=>e[t]));return c.default=()=>e,o.d(a,c),a},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;o.g.importScripts&&(e=o.g.location+"");var t=o.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=e})(),(()=>{var e={179:0};o.O.j=t=>0===e[t];var t=(t,r)=>{var n,a,[c,i,l]=r,u=0;if(c.some((t=>0!==e[t]))){for(n in i)o.o(i,n)&&(o.m[n]=i[n]);if(l)var s=l(o)}for(t&&t(r);u<c.length;u++)a=c[u],o.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return o.O(s)},r=self.webpackChunkapp=self.webpackChunkapp||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var c=o.O(void 0,[216],(()=>o(6011)));c=o.O(c)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QkQsRUFBZ0JDLEdBQVcsRUFFNUIsT0FBTy9ELEVBQW9CUyxFQUFFQyxJQUcxQjRELEVBQXFCQyxLQUFzQixnQkFBSUEsS0FBc0IsaUJBQUssR0FDOUVELEVBQW1CL0IsUUFBUXlCLEVBQXFCUSxLQUFLLEtBQU0sSUFDM0RGLEVBQW1CRyxLQUFPVCxFQUFxQlEsS0FBSyxLQUFNRixFQUFtQkcsS0FBS0QsS0FBS0YsSyxHQzdDdkYsSUFBSUksRUFBc0IxRSxFQUFvQlMsT0FBRU4sRUFBVyxDQUFDLE1BQU0sSUFBT0gsRUFBb0IsUUFDN0YwRSxFQUFzQjFFLEVBQW9CUyxFQUFFaUUsSSIsInNvdXJjZXMiOlsid2VicGFjazovL2FwcC93ZWJwYWNrL3J1bnRpbWUvY2h1bmsgbG9hZGVkIiwid2VicGFjazovL2FwcC93ZWJwYWNrL3J1bnRpbWUvY3JlYXRlIGZha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly9hcHAvLi9zcmMvc2VydmljZVdvcmtlci5qcyIsIndlYnBhY2s6Ly9hcHAvLi9zcmMvY29udGFpbmVycy9BcHAvc3R5bGVzLmpzIiwid2VicGFjazovL2FwcC8uL3NyYy9jb21wb25lbnRzL0RyYWdnYWJsZS5qcyIsIndlYnBhY2s6Ly9hcHAvLi9zcmMvY29tcG9uZW50cy9Ecm9wcGFibGUuanMiLCJ3ZWJwYWNrOi8vYXBwLy4vc3JjL2Fzc2V0cy9hcmFnb3JuLmpwZyIsIndlYnBhY2s6Ly9hcHAvLi9zcmMvYXNzZXRzL2Jvcm9taXIucG5nIiwid2VicGFjazovL2FwcC8uL3NyYy9hc3NldHMvbGVnb2xhcy5qcGciLCJ3ZWJwYWNrOi8vYXBwLy4vc3JjL2Fzc2V0cy9nYW5kYWxmLmpwZyIsIndlYnBhY2s6Ly9hcHAvLi9zcmMvYXNzZXRzL2dpbWxpLmpwZyIsIndlYnBhY2s6Ly9hcHAvLi9zcmMvYXNzZXRzL2Zyb2RvLmpwZyIsIndlYnBhY2s6Ly9hcHAvLi9zcmMvYXNzZXRzL3NhbS5wbmciLCJ3ZWJwYWNrOi8vYXBwLy4vc3JjL2Fzc2V0cy9tZXJyeS5qcGciLCJ3ZWJwYWNrOi8vYXBwLy4vc3JjL2Fzc2V0cy9waXBwaW4uanBnIiwid2VicGFjazovL2FwcC8uL3NyYy9jb250YWluZXJzL0FwcC9hcHAuanMiLCJ3ZWJwYWNrOi8vYXBwLy4vc3JjL2NvbnRhaW5lcnMvQXBwL2luZGV4LmpzIiwid2VicGFjazovL2FwcC8uL3NyYy90aGVtZS5qcyIsIndlYnBhY2s6Ly9hcHAvLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vYXBwL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2FwcC93ZWJwYWNrL3J1bnRpbWUvY29tcGF0IGdldCBkZWZhdWx0IGV4cG9ydCIsIndlYnBhY2s6Ly9hcHAvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL2FwcC93ZWJwYWNrL3J1bnRpbWUvZ2xvYmFsIiwid2VicGFjazovL2FwcC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL2FwcC93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL2FwcC93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly9hcHAvd2VicGFjay9ydW50aW1lL2pzb25wIGNodW5rIGxvYWRpbmciLCJ3ZWJwYWNrOi8vYXBwL3dlYnBhY2svc3RhcnR1cCJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgZGVmZXJyZWQgPSBbXTtcbl9fd2VicGFja19yZXF1aXJlX18uTyA9IChyZXN1bHQsIGNodW5rSWRzLCBmbiwgcHJpb3JpdHkpID0+IHtcblx0aWYoY2h1bmtJZHMpIHtcblx0XHRwcmlvcml0eSA9IHByaW9yaXR5IHx8IDA7XG5cdFx0Zm9yKHZhciBpID0gZGVmZXJyZWQubGVuZ3RoOyBpID4gMCAmJiBkZWZlcnJlZFtpIC0gMV1bMl0gPiBwcmlvcml0eTsgaS0tKSBkZWZlcnJlZFtpXSA9IGRlZmVycmVkW2kgLSAxXTtcblx0XHRkZWZlcnJlZFtpXSA9IFtjaHVua0lkcywgZm4sIHByaW9yaXR5XTtcblx0XHRyZXR1cm47XG5cdH1cblx0dmFyIG5vdEZ1bGZpbGxlZCA9IEluZmluaXR5O1xuXHRmb3IgKHZhciBpID0gMDsgaSA8IGRlZmVycmVkLmxlbmd0aDsgaSsrKSB7XG5cdFx0dmFyIFtjaHVua0lkcywgZm4sIHByaW9yaXR5XSA9IGRlZmVycmVkW2ldO1xuXHRcdHZhciBmdWxmaWxsZWQgPSB0cnVlO1xuXHRcdGZvciAodmFyIGogPSAwOyBqIDwgY2h1bmtJZHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdGlmICgocHJpb3JpdHkgJiAxID09PSAwIHx8IG5vdEZ1bGZpbGxlZCA+PSBwcmlvcml0eSkgJiYgT2JqZWN0LmtleXMoX193ZWJwYWNrX3JlcXVpcmVfXy5PKS5ldmVyeSgoa2V5KSA9PiAoX193ZWJwYWNrX3JlcXVpcmVfXy5PW2tleV0oY2h1bmtJZHNbal0pKSkpIHtcblx0XHRcdFx0Y2h1bmtJZHMuc3BsaWNlKGotLSwgMSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRmdWxmaWxsZWQgPSBmYWxzZTtcblx0XHRcdFx0aWYocHJpb3JpdHkgPCBub3RGdWxmaWxsZWQpIG5vdEZ1bGZpbGxlZCA9IHByaW9yaXR5O1xuXHRcdFx0fVxuXHRcdH1cblx0XHRpZihmdWxmaWxsZWQpIHtcblx0XHRcdGRlZmVycmVkLnNwbGljZShpLS0sIDEpXG5cdFx0XHR2YXIgciA9IGZuKCk7XG5cdFx0XHRpZiAociAhPT0gdW5kZWZpbmVkKSByZXN1bHQgPSByO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gcmVzdWx0O1xufTsiLCJ2YXIgZ2V0UHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YgPyAob2JqKSA9PiAoT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iaikpIDogKG9iaikgPT4gKG9iai5fX3Byb3RvX18pO1xudmFyIGxlYWZQcm90b3R5cGVzO1xuLy8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4vLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbi8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuLy8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4vLyBtb2RlICYgMTY6IHJldHVybiB2YWx1ZSB3aGVuIGl0J3MgUHJvbWlzZS1saWtlXG4vLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuXHRpZihtb2RlICYgMSkgdmFsdWUgPSB0aGlzKHZhbHVlKTtcblx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcblx0aWYodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSkge1xuXHRcdGlmKChtb2RlICYgNCkgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuXHRcdGlmKChtb2RlICYgMTYpICYmIHR5cGVvZiB2YWx1ZS50aGVuID09PSAnZnVuY3Rpb24nKSByZXR1cm4gdmFsdWU7XG5cdH1cblx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcblx0dmFyIGRlZiA9IHt9O1xuXHRsZWFmUHJvdG90eXBlcyA9IGxlYWZQcm90b3R5cGVzIHx8IFtudWxsLCBnZXRQcm90byh7fSksIGdldFByb3RvKFtdKSwgZ2V0UHJvdG8oZ2V0UHJvdG8pXTtcblx0Zm9yKHZhciBjdXJyZW50ID0gbW9kZSAmIDIgJiYgdmFsdWU7IHR5cGVvZiBjdXJyZW50ID09ICdvYmplY3QnICYmICF+bGVhZlByb3RvdHlwZXMuaW5kZXhPZihjdXJyZW50KTsgY3VycmVudCA9IGdldFByb3RvKGN1cnJlbnQpKSB7XG5cdFx0T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoY3VycmVudCkuZm9yRWFjaCgoa2V5KSA9PiAoZGVmW2tleV0gPSAoKSA9PiAodmFsdWVba2V5XSkpKTtcblx0fVxuXHRkZWZbJ2RlZmF1bHQnXSA9ICgpID0+ICh2YWx1ZSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChucywgZGVmKTtcblx0cmV0dXJuIG5zO1xufTsiLCIvLyBUaGlzIG9wdGlvbmFsIGNvZGUgaXMgdXNlZCB0byByZWdpc3RlciBhIHNlcnZpY2Ugd29ya2VyLlxuLy8gcmVnaXN0ZXIoKSBpcyBub3QgY2FsbGVkIGJ5IGRlZmF1bHQuXG5cbi8vIFRoaXMgbGV0cyB0aGUgYXBwIGxvYWQgZmFzdGVyIG9uIHN1YnNlcXVlbnQgdmlzaXRzIGluIHByb2R1Y3Rpb24sIGFuZCBnaXZlc1xuLy8gaXQgb2ZmbGluZSBjYXBhYmlsaXRpZXMuIEhvd2V2ZXIsIGl0IGFsc28gbWVhbnMgdGhhdCBkZXZlbG9wZXJzIChhbmQgdXNlcnMpXG4vLyB3aWxsIG9ubHkgc2VlIGRlcGxveWVkIHVwZGF0ZXMgb24gc3Vic2VxdWVudCB2aXNpdHMgdG8gYSBwYWdlLCBhZnRlciBhbGwgdGhlXG4vLyBleGlzdGluZyB0YWJzIG9wZW4gb24gdGhlIHBhZ2UgaGF2ZSBiZWVuIGNsb3NlZCwgc2luY2UgcHJldmlvdXNseSBjYWNoZWRcbi8vIHJlc291cmNlcyBhcmUgdXBkYXRlZCBpbiB0aGUgYmFja2dyb3VuZC5cblxuLy8gVG8gbGVhcm4gbW9yZSBhYm91dCB0aGUgYmVuZWZpdHMgb2YgdGhpcyBtb2RlbCBhbmQgaW5zdHJ1Y3Rpb25zIG9uIGhvdyB0b1xuLy8gb3B0LWluLCByZWFkIGh0dHBzOi8vYml0Lmx5L0NSQS1QV0FcblxuY29uc3QgaXNMb2NhbGhvc3QgPSBCb29sZWFuKFxuICB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUgPT09ICdsb2NhbGhvc3QnIHx8XG4gICAgLy8gWzo6MV0gaXMgdGhlIElQdjYgbG9jYWxob3N0IGFkZHJlc3MuXG4gICAgd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lID09PSAnWzo6MV0nIHx8XG4gICAgLy8gMTI3LjAuMC4wLzggYXJlIGNvbnNpZGVyZWQgbG9jYWxob3N0IGZvciBJUHY0LlxuICAgIHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZS5tYXRjaChcbiAgICAgIC9eMTI3KD86XFwuKD86MjVbMC01XXwyWzAtNF1bMC05XXxbMDFdP1swLTldWzAtOV0/KSl7M30kL1xuICAgIClcbik7XG5cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3Rlcihjb25maWcpIHtcbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicgJiYgJ3NlcnZpY2VXb3JrZXInIGluIG5hdmlnYXRvcikge1xuICAgIC8vIFRoZSBVUkwgY29uc3RydWN0b3IgaXMgYXZhaWxhYmxlIGluIGFsbCBicm93c2VycyB0aGF0IHN1cHBvcnQgU1cuXG4gICAgY29uc3QgcHVibGljVXJsID0gbmV3IFVSTChwcm9jZXNzLmVudi5QVUJMSUNfVVJMLCB3aW5kb3cubG9jYXRpb24uaHJlZik7XG4gICAgaWYgKHB1YmxpY1VybC5vcmlnaW4gIT09IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4pIHtcbiAgICAgIC8vIE91ciBzZXJ2aWNlIHdvcmtlciB3b24ndCB3b3JrIGlmIFBVQkxJQ19VUkwgaXMgb24gYSBkaWZmZXJlbnQgb3JpZ2luXG4gICAgICAvLyBmcm9tIHdoYXQgb3VyIHBhZ2UgaXMgc2VydmVkIG9uLiBUaGlzIG1pZ2h0IGhhcHBlbiBpZiBhIENETiBpcyB1c2VkIHRvXG4gICAgICAvLyBzZXJ2ZSBhc3NldHM7IHNlZSBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svY3JlYXRlLXJlYWN0LWFwcC9pc3N1ZXMvMjM3NFxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKCkgPT4ge1xuICAgICAgY29uc3Qgc3dVcmwgPSBgJHtwcm9jZXNzLmVudi5QVUJMSUNfVVJMfS9zZXJ2aWNlLXdvcmtlci5qc2A7XG5cbiAgICAgIGlmIChpc0xvY2FsaG9zdCkge1xuICAgICAgICAvLyBUaGlzIGlzIHJ1bm5pbmcgb24gbG9jYWxob3N0LiBMZXQncyBjaGVjayBpZiBhIHNlcnZpY2Ugd29ya2VyIHN0aWxsIGV4aXN0cyBvciBub3QuXG4gICAgICAgIGNoZWNrVmFsaWRTZXJ2aWNlV29ya2VyKHN3VXJsLCBjb25maWcpO1xuXG4gICAgICAgIC8vIEFkZCBzb21lIGFkZGl0aW9uYWwgbG9nZ2luZyB0byBsb2NhbGhvc3QsIHBvaW50aW5nIGRldmVsb3BlcnMgdG8gdGhlXG4gICAgICAgIC8vIHNlcnZpY2Ugd29ya2VyL1BXQSBkb2N1bWVudGF0aW9uLlxuICAgICAgICBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5yZWFkeS50aGVuKCgpID0+IHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICdUaGlzIHdlYiBhcHAgaXMgYmVpbmcgc2VydmVkIGNhY2hlLWZpcnN0IGJ5IGEgc2VydmljZSAnICtcbiAgICAgICAgICAgICAgJ3dvcmtlci4gVG8gbGVhcm4gbW9yZSwgdmlzaXQgaHR0cHM6Ly9iaXQubHkvQ1JBLVBXQSdcbiAgICAgICAgICApO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIElzIG5vdCBsb2NhbGhvc3QuIEp1c3QgcmVnaXN0ZXIgc2VydmljZSB3b3JrZXJcbiAgICAgICAgcmVnaXN0ZXJWYWxpZFNXKHN3VXJsLCBjb25maWcpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIHJlZ2lzdGVyVmFsaWRTVyhzd1VybCwgY29uZmlnKSB7XG4gIG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyXG4gICAgLnJlZ2lzdGVyKHN3VXJsKVxuICAgIC50aGVuKHJlZ2lzdHJhdGlvbiA9PiB7XG4gICAgICByZWdpc3RyYXRpb24ub251cGRhdGVmb3VuZCA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgaW5zdGFsbGluZ1dvcmtlciA9IHJlZ2lzdHJhdGlvbi5pbnN0YWxsaW5nO1xuICAgICAgICBpZiAoaW5zdGFsbGluZ1dvcmtlciA9PSBudWxsKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGluc3RhbGxpbmdXb3JrZXIub25zdGF0ZWNoYW5nZSA9ICgpID0+IHtcbiAgICAgICAgICBpZiAoaW5zdGFsbGluZ1dvcmtlci5zdGF0ZSA9PT0gJ2luc3RhbGxlZCcpIHtcbiAgICAgICAgICAgIGlmIChuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5jb250cm9sbGVyKSB7XG4gICAgICAgICAgICAgIC8vIEF0IHRoaXMgcG9pbnQsIHRoZSB1cGRhdGVkIHByZWNhY2hlZCBjb250ZW50IGhhcyBiZWVuIGZldGNoZWQsXG4gICAgICAgICAgICAgIC8vIGJ1dCB0aGUgcHJldmlvdXMgc2VydmljZSB3b3JrZXIgd2lsbCBzdGlsbCBzZXJ2ZSB0aGUgb2xkZXJcbiAgICAgICAgICAgICAgLy8gY29udGVudCB1bnRpbCBhbGwgY2xpZW50IHRhYnMgYXJlIGNsb3NlZC5cbiAgICAgICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICAgICAgJ05ldyBjb250ZW50IGlzIGF2YWlsYWJsZSBhbmQgd2lsbCBiZSB1c2VkIHdoZW4gYWxsICcgK1xuICAgICAgICAgICAgICAgICAgJ3RhYnMgZm9yIHRoaXMgcGFnZSBhcmUgY2xvc2VkLiBTZWUgaHR0cHM6Ly9iaXQubHkvQ1JBLVBXQS4nXG4gICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgLy8gRXhlY3V0ZSBjYWxsYmFja1xuICAgICAgICAgICAgICBpZiAoY29uZmlnICYmIGNvbmZpZy5vblVwZGF0ZSkge1xuICAgICAgICAgICAgICAgIGNvbmZpZy5vblVwZGF0ZShyZWdpc3RyYXRpb24pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvLyBBdCB0aGlzIHBvaW50LCBldmVyeXRoaW5nIGhhcyBiZWVuIHByZWNhY2hlZC5cbiAgICAgICAgICAgICAgLy8gSXQncyB0aGUgcGVyZmVjdCB0aW1lIHRvIGRpc3BsYXkgYVxuICAgICAgICAgICAgICAvLyBcIkNvbnRlbnQgaXMgY2FjaGVkIGZvciBvZmZsaW5lIHVzZS5cIiBtZXNzYWdlLlxuICAgICAgICAgICAgICBjb25zb2xlLmxvZygnQ29udGVudCBpcyBjYWNoZWQgZm9yIG9mZmxpbmUgdXNlLicpO1xuXG4gICAgICAgICAgICAgIC8vIEV4ZWN1dGUgY2FsbGJhY2tcbiAgICAgICAgICAgICAgaWYgKGNvbmZpZyAmJiBjb25maWcub25TdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgY29uZmlnLm9uU3VjY2VzcyhyZWdpc3RyYXRpb24pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfTtcbiAgICB9KVxuICAgIC5jYXRjaChlcnJvciA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkdXJpbmcgc2VydmljZSB3b3JrZXIgcmVnaXN0cmF0aW9uOicsIGVycm9yKTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gY2hlY2tWYWxpZFNlcnZpY2VXb3JrZXIoc3dVcmwsIGNvbmZpZykge1xuICAvLyBDaGVjayBpZiB0aGUgc2VydmljZSB3b3JrZXIgY2FuIGJlIGZvdW5kLiBJZiBpdCBjYW4ndCByZWxvYWQgdGhlIHBhZ2UuXG4gIGZldGNoKHN3VXJsLCB7XG4gICAgaGVhZGVyczogeyAnU2VydmljZS1Xb3JrZXInOiAnc2NyaXB0JyB9XG4gIH0pXG4gICAgLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgLy8gRW5zdXJlIHNlcnZpY2Ugd29ya2VyIGV4aXN0cywgYW5kIHRoYXQgd2UgcmVhbGx5IGFyZSBnZXR0aW5nIGEgSlMgZmlsZS5cbiAgICAgIGNvbnN0IGNvbnRlbnRUeXBlID0gcmVzcG9uc2UuaGVhZGVycy5nZXQoJ2NvbnRlbnQtdHlwZScpO1xuICAgICAgaWYgKFxuICAgICAgICByZXNwb25zZS5zdGF0dXMgPT09IDQwNCB8fFxuICAgICAgICAoY29udGVudFR5cGUgIT0gbnVsbCAmJiBjb250ZW50VHlwZS5pbmRleE9mKCdqYXZhc2NyaXB0JykgPT09IC0xKVxuICAgICAgKSB7XG4gICAgICAgIC8vIE5vIHNlcnZpY2Ugd29ya2VyIGZvdW5kLiBQcm9iYWJseSBhIGRpZmZlcmVudCBhcHAuIFJlbG9hZCB0aGUgcGFnZS5cbiAgICAgICAgbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIucmVhZHkudGhlbihyZWdpc3RyYXRpb24gPT4ge1xuICAgICAgICAgIHJlZ2lzdHJhdGlvbi51bnJlZ2lzdGVyKCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gU2VydmljZSB3b3JrZXIgZm91bmQuIFByb2NlZWQgYXMgbm9ybWFsLlxuICAgICAgICByZWdpc3RlclZhbGlkU1coc3dVcmwsIGNvbmZpZyk7XG4gICAgICB9XG4gICAgfSlcbiAgICAuY2F0Y2goKCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICdObyBpbnRlcm5ldCBjb25uZWN0aW9uIGZvdW5kLiBBcHAgaXMgcnVubmluZyBpbiBvZmZsaW5lIG1vZGUuJ1xuICAgICAgKTtcbiAgICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVucmVnaXN0ZXIoKSB7XG4gIGlmICgnc2VydmljZVdvcmtlcicgaW4gbmF2aWdhdG9yKSB7XG4gICAgbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIucmVhZHkudGhlbihyZWdpc3RyYXRpb24gPT4ge1xuICAgICAgcmVnaXN0cmF0aW9uLnVucmVnaXN0ZXIoKTtcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgZ3JleSB9IGZyb20gJ0BtdWkvbWF0ZXJpYWwvY29sb3JzJztcclxuaW1wb3J0IHsgbWFrZVN0eWxlcyB9IGZyb20gJ3Rzcy1yZWFjdC9tdWknO1xyXG5cclxuY29uc3QgdXNlU3R5bGVzID0gbWFrZVN0eWxlcygpKCh0aGVtZSkgPT4gKHtcclxuICByb290OiB7XHJcbiAgICBoZWlnaHQ6ICcxMDB2aCcsXHJcbiAgICBkaXNwbGF5OiAnZmxleCcsXHJcbiAgICBmbGV4RGlyZWN0aW9uOiAnY29sdW1uJyxcclxuICB9LFxyXG4gIHJvdzoge1xyXG4gICAgZGlzcGxheTogJ2ZsZXgnLFxyXG4gIH0sXHJcbiAgY29sOiB7XHJcbiAgICBtYXJnaW46IDUsXHJcbiAgICAvLyBwYWRkaW5nOiAxMCxcclxuICAgIGJvcmRlcjogJzFweCBzb2xpZCBibGFjaycsXHJcbiAgfSxcclxuICBkcm9wem9uZToge1xyXG4gICAgYmFja2dyb3VuZDogZ3JleVs5MDBdLFxyXG4gICAgaGVpZ2h0OiAxOTAsXHJcbiAgICB3aWR0aDogMTkwLFxyXG4gICAgZGlzcGxheTogJ2dyaWQnLFxyXG4gICAgZ2FwOiA1LFxyXG4gICAgZ3JpZEF1dG9Sb3dzOiAnbWlubWF4KDEwMHB4LCBhdXRvKScsXHJcbiAgfSxcclxuICB0aGluZ3M6IHtcclxuICAgIGRpc3BsYXk6ICdmbGV4JyxcclxuICAgIGZsZXhXcmFwOiAnd3JhcCcsXHJcbiAgICAnJiBkaXYgKic6IHtcclxuICAgICAgaGVpZ2h0OiAxMDAsXHJcbiAgICAgIHdpZHRoOiAxMDAsXHJcbiAgICAgIG1hcmdpbjogNSxcclxuICAgIH1cclxuICB9LFxyXG4gIHRoaW5nOiB7XHJcbiAgICB3aWR0aDogJzEwMCUnLFxyXG4gICAgaGVpZ2h0OiAnMTAwJScsXHJcbiAgICBtaW5IZWlnaHQ6IDMwLFxyXG4gICAgbWluV2lkdGg6IDMwLFxyXG4gICAgLy8gYm9yZGVyUmFkaXVzOiAnNTAlJyxcclxuICAgIC8vIGJhY2tncm91bmQ6ICdibHVlJyxcclxuICAgIGZvbnRXZWlnaHQ6IDcwMCxcclxuICAgIC8vIGNvbG9yOiAnd2hpdGUnLFxyXG4gICAgYmFja2dyb3VuZFNpemU6ICdjb3ZlcicsXHJcbiAgICBkaXNwbGF5OiAnZmxleCcsXHJcbiAgICBqdXN0aWZ5Q29udGVudDogJ2NlbnRlcicsXHJcbiAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcclxuICB9XHJcbn0pKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHVzZVN0eWxlczsiLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCB7IG1ha2VTdHlsZXMgfSBmcm9tIFwidHNzLXJlYWN0L211aVwiO1xyXG5pbXBvcnQgeyB1c2VEcmFnIH0gZnJvbSAncmVhY3QtZG5kJ1xyXG5cclxuY29uc3QgdXNlU3R5bGVzID0gbWFrZVN0eWxlcygpKCh0aGVtZSwgeyBpc0RyYWdnaW5nIH0pID0+ICh7XHJcbiAgcm9vdDoge1xyXG4gICAgY3Vyc29yOiBpc0RyYWdnaW5nID8gJ2dyYWJiaW5nICFpbXBvcnRhbnQnIDogJ2dyYWInLFxyXG4gIH1cclxufSkpXHJcblxyXG5jb25zdCBEcmFnZ2FibGUgPSAocHJvcHMpID0+IHtcclxuICBjb25zdCB7IGNoaWxkcmVuLCB0eXBlLCBpZCB9ID0gcHJvcHM7XHJcbiAgY29uc3QgW3sgaXNEcmFnZ2luZyB9LCBkcmFnXSA9IHVzZURyYWcoKCkgPT4gKHtcclxuICAgIHR5cGU6IFwiRHJhZ2dhYmxlXCIgfHwgdHlwZSxcclxuICAgIGl0ZW06IHsgaWQgfSxcclxuICAgIGNvbGxlY3Q6IG1vbml0b3IgPT4gKHtcclxuICAgICAgaXNEcmFnZ2luZzogISFtb25pdG9yLmlzRHJhZ2dpbmcoKSxcclxuICAgIH0pLFxyXG4gIH0pKTtcclxuICBjb25zdCB7IGNsYXNzZXMgfSA9IHVzZVN0eWxlcyh7IGlzRHJhZ2dpbmcgfSk7XHJcbiAgcmV0dXJuIChcclxuICAgIDxkaXYgXHJcbiAgICAgIGNsYXNzTmFtZT17Y2xhc3Nlcy5yb290fVxyXG4gICAgICByZWY9e2RyYWd9IFxyXG4gICAgPlxyXG4gICAgICB7Y2hpbGRyZW59XHJcbiAgICA8L2Rpdj5cclxuICApO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBEcmFnZ2FibGU7IiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQgeyBtYWtlU3R5bGVzIH0gZnJvbSBcInRzcy1yZWFjdC9tdWlcIjtcclxuaW1wb3J0IHsgdXNlRHJvcCB9IGZyb20gJ3JlYWN0LWRuZCdcclxuXHJcbmNvbnN0IHVzZVN0eWxlcyA9IG1ha2VTdHlsZXMoKSgodGhlbWUsIHsgaXNPdmVyIH0pID0+ICh7XHJcbiAgcm9vdDoge1xyXG4gICAgYmFja2dyb3VuZDogaXNPdmVyID8gJ3JlZCcgOiAnd2hpdGUnLFxyXG4gIH1cclxufSkpXHJcblxyXG5jb25zdCBEcm9wcGFibGUgPSAocHJvcHMpID0+IHtcclxuICBjb25zdCB7IGNoaWxkcmVuLCBhY2NlcHQsIG9uRHJvcCB9ID0gcHJvcHM7XHJcbiAgY29uc3QgW3sgY2FuRHJvcCwgaXNPdmVyIH0sIGRyb3BdID0gdXNlRHJvcCgoKSA9PiAoe1xyXG4gICAgYWNjZXB0OiBcIkRyYWdnYWJsZVwiIHx8IGFjY2VwdCxcclxuICAgIGNvbGxlY3Q6IG1vbml0b3IgPT4gKHtcclxuICAgICAgaXNPdmVyOiBtb25pdG9yLmlzT3ZlcigpLFxyXG4gICAgICBjYW5Ecm9wOiBtb25pdG9yLmNhbkRyb3AoKVxyXG4gICAgfSksXHJcbiAgICBkcm9wOiBvbkRyb3BcclxuICB9KSk7XHJcbiAgY29uc3QgeyBjbGFzc2VzIH0gPSB1c2VTdHlsZXMoeyBpc092ZXIsIGNhbkRyb3AgfSk7XHJcblxyXG4gIHJldHVybiAoXHJcbiAgICA8ZGl2IFxyXG4gICAgICBjbGFzc05hbWU9e2NsYXNzZXMucm9vdH1cclxuICAgICAgcmVmPXtkcm9wfVxyXG4gICAgICByb2xlPXsnRHVzdGJpbid9IFxyXG4gICAgPlxyXG4gICAgICB7Y2hpbGRyZW59XHJcbiAgICA8L2Rpdj5cclxuICApO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBEcm9wcGFibGU7IiwiZXhwb3J0IGRlZmF1bHQgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gKyBcImQ1MzA0MTEwZWUwZmM3NTU0ZjkzZTA1MzZjZTQ3NDliLmpwZ1wiOyIsImV4cG9ydCBkZWZhdWx0IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCJhZTI2ZDJkOTVkYzJmYzZiOTBlMzA4ZjMyYTUyNzczNi5wbmdcIjsiLCJleHBvcnQgZGVmYXVsdCBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiMDEzYTEwYTA3NzU5MDVkMGE3ZTgyMjlkNmNjODIxY2UuanBnXCI7IiwiZXhwb3J0IGRlZmF1bHQgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gKyBcIjFkOTUwNzI2MGZkYzlkZDViYTY0ZjZlZmY2MzI1OGViLmpwZ1wiOyIsImV4cG9ydCBkZWZhdWx0IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCI0MzU5N2FhZWM2YTU0ZGI4MmQ4MmUxMGQ2ZThjY2YwZS5qcGdcIjsiLCJleHBvcnQgZGVmYXVsdCBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiYzNiNjQ3Yzg1ZjZhOTIyZTExNjgxZjgwM2VkMmFmZGQuanBnXCI7IiwiZXhwb3J0IGRlZmF1bHQgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gKyBcIjdmNDc3ODkwNjg5N2ZjMDE1NzA2MjE5N2RkY2YyYWNlLnBuZ1wiOyIsImV4cG9ydCBkZWZhdWx0IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCI3ZmI3MzRjZDRmZjVhY2M5Mjg5MTc1YmNhN2JhZmY3YS5qcGdcIjsiLCJleHBvcnQgZGVmYXVsdCBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiMGNhMzEyMmM1NGRmNmI1MjczZjIwMGIyNjVhNzllNWEuanBnXCI7IiwiaW1wb3J0IFJlYWN0LCB7IHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHVzZVN0eWxlcyBmcm9tICcuL3N0eWxlcyc7XHJcbmltcG9ydCBEcmFnZ2FibGUgZnJvbSAnY29tcG9uZW50cy9EcmFnZ2FibGUnO1xyXG5pbXBvcnQgRHJvcHBhYmxlIGZyb20gJ2NvbXBvbmVudHMvRHJvcHBhYmxlJztcclxuXHJcbmltcG9ydCBhcmFnb3JuIGZyb20gJ2Fzc2V0cy9hcmFnb3JuLmpwZyc7XHJcbmltcG9ydCBib3JvbWlyIGZyb20gJ2Fzc2V0cy9ib3JvbWlyLnBuZyc7XHJcbmltcG9ydCBsZWdvbGFzIGZyb20gJ2Fzc2V0cy9sZWdvbGFzLmpwZyc7XHJcbmltcG9ydCBnYW5kYWxmIGZyb20gJ2Fzc2V0cy9nYW5kYWxmLmpwZyc7XHJcbmltcG9ydCBnaW1saSBmcm9tICdhc3NldHMvZ2ltbGkuanBnJztcclxuaW1wb3J0IGZyb2RvIGZyb20gJ2Fzc2V0cy9mcm9kby5qcGcnO1xyXG5pbXBvcnQgc2FtIGZyb20gJ2Fzc2V0cy9zYW0ucG5nJztcclxuaW1wb3J0IG1lcnJ5IGZyb20gJ2Fzc2V0cy9tZXJyeS5qcGcnO1xyXG5pbXBvcnQgcGlwcGluIGZyb20gJ2Fzc2V0cy9waXBwaW4uanBnJztcclxuXHJcbmNvbnN0IHJvd3MgPSBbJ0xhd2Z1bCcsICdOZXV0cmFsJywgJ0NoYW90aWMnXTtcclxuY29uc3QgY29sdW1ucyA9IFsnR29vZCcsICdOZXV0cmFsJywgJ0V2aWwnXTtcclxuY29uc3QgcGljcyA9IFthcmFnb3JuLCBib3JvbWlyLCBsZWdvbGFzLCBnYW5kYWxmLCBnaW1saSwgZnJvZG8sIHNhbSwgbWVycnksIHBpcHBpbl1cclxuXHJcbmZ1bmN0aW9uIEFwcCgpIHtcclxuXHJcbiAgY29uc3QgeyBjbGFzc2VzIH0gPSB1c2VTdHlsZXMoKTtcclxuICBcclxuICBjb25zdCBbdGhpbmdzLCBzZXRUaGluZ3NdID0gUmVhY3QudXNlU3RhdGUocGljcyk7XHJcbiAgY29uc3QgW3N0YXRlLCBzZXRTdGF0ZV0gPSBSZWFjdC51c2VTdGF0ZSh7fSk7XHJcbiAgY29uc3Qgb25Ecm9wID0gKGtleSwgaXRlbSkgPT4ge1xyXG4gICAgc2V0U3RhdGUoX3N0YXRlID0+ICh7XHJcbiAgICAgIC4uLl9zdGF0ZSxcclxuICAgICAgW2l0ZW0uaWRdOiBrZXlcclxuICAgIH0pKTtcclxuICAgIHNldFRoaW5ncyhfdGhpbmdzID0+IChfdGhpbmdzLmZpbHRlcih0ID0+IHQgIT09IGl0ZW0uaWQpKSk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPGRpdiBjbGFzc05hbWU9e2NsYXNzZXMucm9vdH0+XHJcbiAgICAgIHtyb3dzLm1hcChyb3cgPT4gPGRpdiBrZXk9e3Jvd30gY2xhc3NOYW1lPXtjbGFzc2VzLnJvd30+XHJcbiAgICAgICAge2NvbHVtbnMubWFwKGNvbCA9PiB7XHJcbiAgICAgICAgICBjb25zdCBhcnIgPSBwaWNzLmZpbHRlcihwID0+IHN0YXRlW3BdID09PSBgJHtyb3d9JHtjb2x9YCk7XHJcbiAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8RHJvcHBhYmxlIGtleT17YCR7cm93fSR7Y29sfWB9IG9uRHJvcD17KGl0ZW0sIG1vbml0b3IpID0+IG9uRHJvcChgJHtyb3d9JHtjb2x9YCwgaXRlbSl9PlxyXG4gICAgICAgICAgICAgIDxkaXY+e3Jvd30ge2NvbH08L2Rpdj5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17Y2xhc3Nlcy5jb2x9PiAgXHJcbiAgICAgICAgICAgICAgICA8ZGl2IFxyXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzZXMuZHJvcHpvbmV9XHJcbiAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgZ3JpZFRlbXBsYXRlQ29sdW1uczogYHJlcGVhdCgke01hdGguY2VpbChNYXRoLnNxcnQoYXJyLmxlbmd0aCkpfSwgMWZyKWAsXHJcbiAgICAgICAgICAgICAgICAgICAgZ3JpZFRlbXBsYXRlUm93czogYHJlcGVhdCgke01hdGguY2VpbChNYXRoLnNxcnQoYXJyLmxlbmd0aCkpfSwgMWZyKWAsXHJcbiAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgIHthcnIubWFwKHBpYyA9PiBcclxuICAgICAgICAgICAgICAgICAgICA8RHJhZ2dhYmxlIGlkPXtwaWN9IGtleT17cGljfT5cclxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtjbGFzc2VzLnRoaW5nfSBzdHlsZT17eyBiYWNrZ3JvdW5kSW1hZ2U6IGB1cmwoJHtwaWN9KWB9fS8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9EcmFnZ2FibGU+XHJcbiAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9Ecm9wcGFibGU+XHJcbiAgICAgICAgICApfVxyXG4gICAgICAgICl9ICBcclxuICAgICAgPC9kaXY+KX1cclxuICAgICAgPGRpdiBjbGFzc05hbWU9e2NsYXNzZXMudGhpbmdzfT5cclxuICAgICAgICB7dGhpbmdzLm1hcCh0aGluZyA9PlxyXG4gICAgICAgICAgPERyYWdnYWJsZSBpZD17dGhpbmd9IGtleT17dGhpbmd9PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17Y2xhc3Nlcy50aGluZ30gc3R5bGU9e3sgYmFja2dyb3VuZEltYWdlOiBgdXJsKCR7dGhpbmd9KWB9fS8+XHJcbiAgICAgICAgICA8L0RyYWdnYWJsZT5cclxuICAgICAgICApfVxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PiAgICBcclxuICApO1xyXG59XHJcblxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQXBwOyIsImltcG9ydCBBcHAgZnJvbSAnLi9hcHAnO1xyXG5leHBvcnQgZGVmYXVsdCBBcHA7IiwiaW1wb3J0IHsgY3JlYXRlVGhlbWUgfSBmcm9tIFwiQG11aS9zeXN0ZW1cIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNyZWF0ZVRoZW1lKHtcclxuICBcclxufSkiLCIvKipcclxuICogQG1vZHVsZSBNYWluXHJcbiAqL1xyXG5cclxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IFJlYWN0RE9NIGZyb20gJ3JlYWN0LWRvbSdcclxuXHJcbmltcG9ydCB7IENhY2hlUHJvdmlkZXIgfSBmcm9tIFwiQGVtb3Rpb24vcmVhY3RcIjtcclxuaW1wb3J0IGNyZWF0ZUNhY2hlIGZyb20gXCJAZW1vdGlvbi9jYWNoZVwiO1xyXG5pbXBvcnQgeyBUaGVtZVByb3ZpZGVyIH0gZnJvbSBcIkBtdWkvbWF0ZXJpYWwvc3R5bGVzXCI7XHJcbmltcG9ydCB7IEhUTUw1QmFja2VuZCB9IGZyb20gJ3JlYWN0LWRuZC1odG1sNS1iYWNrZW5kJ1xyXG5pbXBvcnQgeyBEbmRQcm92aWRlciB9IGZyb20gJ3JlYWN0LWRuZCdcclxuXHJcbmltcG9ydCAqIGFzIHNlcnZpY2VXb3JrZXIgZnJvbSAnLi9zZXJ2aWNlV29ya2VyJztcclxuXHJcbmltcG9ydCBBcHAgZnJvbSAnLi9jb250YWluZXJzL0FwcCc7XHJcbmltcG9ydCB0aGVtZSBmcm9tICcuL3RoZW1lJztcclxuXHJcbmV4cG9ydCBjb25zdCBtdWlDYWNoZSA9IGNyZWF0ZUNhY2hlKHtcclxuICBcImtleVwiOiBcIm11aVwiLFxyXG4gIFwicHJlcGVuZFwiOiB0cnVlXHJcbn0pO1xyXG5cclxuUmVhY3RET00ucmVuZGVyKFxyXG4gIDxDYWNoZVByb3ZpZGVyIHZhbHVlPXttdWlDYWNoZX0+XHJcbiAgICA8VGhlbWVQcm92aWRlciB0aGVtZT17dGhlbWV9PlxyXG4gICAgICA8RG5kUHJvdmlkZXIgYmFja2VuZD17SFRNTDVCYWNrZW5kfT5cclxuICAgICAgICA8QXBwIC8+XHJcbiAgICAgIDwvRG5kUHJvdmlkZXI+XHJcbiAgICA8L1RoZW1lUHJvdmlkZXI+XHJcbiAgPC9DYWNoZVByb3ZpZGVyPixcclxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncm9vdCcpXHJcbik7XHJcblxyXG5pZiAobW9kdWxlLmhvdCkge1xyXG4gIG1vZHVsZS5ob3QuYWNjZXB0KCcuL2NvbnRhaW5lcnMvQXBwJyk7XHJcbn1cclxuXHJcbnNlcnZpY2VXb3JrZXIudW5yZWdpc3RlcigpO1xyXG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuLy8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbl9fd2VicGFja19yZXF1aXJlX18ubSA9IF9fd2VicGFja19tb2R1bGVzX187XG5cbiIsIi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSAobW9kdWxlKSA9PiB7XG5cdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuXHRcdCgpID0+IChtb2R1bGVbJ2RlZmF1bHQnXSkgOlxuXHRcdCgpID0+IChtb2R1bGUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCB7IGE6IGdldHRlciB9KTtcblx0cmV0dXJuIGdldHRlcjtcbn07IiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5nID0gKGZ1bmN0aW9uKCkge1xuXHRpZiAodHlwZW9mIGdsb2JhbFRoaXMgPT09ICdvYmplY3QnKSByZXR1cm4gZ2xvYmFsVGhpcztcblx0dHJ5IHtcblx0XHRyZXR1cm4gdGhpcyB8fCBuZXcgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JykgcmV0dXJuIHdpbmRvdztcblx0fVxufSkoKTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwidmFyIHNjcmlwdFVybDtcbmlmIChfX3dlYnBhY2tfcmVxdWlyZV9fLmcuaW1wb3J0U2NyaXB0cykgc2NyaXB0VXJsID0gX193ZWJwYWNrX3JlcXVpcmVfXy5nLmxvY2F0aW9uICsgXCJcIjtcbnZhciBkb2N1bWVudCA9IF9fd2VicGFja19yZXF1aXJlX18uZy5kb2N1bWVudDtcbmlmICghc2NyaXB0VXJsICYmIGRvY3VtZW50KSB7XG5cdGlmIChkb2N1bWVudC5jdXJyZW50U2NyaXB0KVxuXHRcdHNjcmlwdFVybCA9IGRvY3VtZW50LmN1cnJlbnRTY3JpcHQuc3JjXG5cdGlmICghc2NyaXB0VXJsKSB7XG5cdFx0dmFyIHNjcmlwdHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNjcmlwdFwiKTtcblx0XHRpZihzY3JpcHRzLmxlbmd0aCkgc2NyaXB0VXJsID0gc2NyaXB0c1tzY3JpcHRzLmxlbmd0aCAtIDFdLnNyY1xuXHR9XG59XG4vLyBXaGVuIHN1cHBvcnRpbmcgYnJvd3NlcnMgd2hlcmUgYW4gYXV0b21hdGljIHB1YmxpY1BhdGggaXMgbm90IHN1cHBvcnRlZCB5b3UgbXVzdCBzcGVjaWZ5IGFuIG91dHB1dC5wdWJsaWNQYXRoIG1hbnVhbGx5IHZpYSBjb25maWd1cmF0aW9uXG4vLyBvciBwYXNzIGFuIGVtcHR5IHN0cmluZyAoXCJcIikgYW5kIHNldCB0aGUgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gdmFyaWFibGUgZnJvbSB5b3VyIGNvZGUgdG8gdXNlIHlvdXIgb3duIGxvZ2ljLlxuaWYgKCFzY3JpcHRVcmwpIHRocm93IG5ldyBFcnJvcihcIkF1dG9tYXRpYyBwdWJsaWNQYXRoIGlzIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBicm93c2VyXCIpO1xuc2NyaXB0VXJsID0gc2NyaXB0VXJsLnJlcGxhY2UoLyMuKiQvLCBcIlwiKS5yZXBsYWNlKC9cXD8uKiQvLCBcIlwiKS5yZXBsYWNlKC9cXC9bXlxcL10rJC8sIFwiL1wiKTtcbl9fd2VicGFja19yZXF1aXJlX18ucCA9IHNjcmlwdFVybDsiLCIvLyBubyBiYXNlVVJJXG5cbi8vIG9iamVjdCB0byBzdG9yZSBsb2FkZWQgYW5kIGxvYWRpbmcgY2h1bmtzXG4vLyB1bmRlZmluZWQgPSBjaHVuayBub3QgbG9hZGVkLCBudWxsID0gY2h1bmsgcHJlbG9hZGVkL3ByZWZldGNoZWRcbi8vIFtyZXNvbHZlLCByZWplY3QsIFByb21pc2VdID0gY2h1bmsgbG9hZGluZywgMCA9IGNodW5rIGxvYWRlZFxudmFyIGluc3RhbGxlZENodW5rcyA9IHtcblx0MTc5OiAwXG59O1xuXG4vLyBubyBjaHVuayBvbiBkZW1hbmQgbG9hZGluZ1xuXG4vLyBubyBwcmVmZXRjaGluZ1xuXG4vLyBubyBwcmVsb2FkZWRcblxuLy8gbm8gSE1SXG5cbi8vIG5vIEhNUiBtYW5pZmVzdFxuXG5fX3dlYnBhY2tfcmVxdWlyZV9fLk8uaiA9IChjaHVua0lkKSA9PiAoaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID09PSAwKTtcblxuLy8gaW5zdGFsbCBhIEpTT05QIGNhbGxiYWNrIGZvciBjaHVuayBsb2FkaW5nXG52YXIgd2VicGFja0pzb25wQ2FsbGJhY2sgPSAocGFyZW50Q2h1bmtMb2FkaW5nRnVuY3Rpb24sIGRhdGEpID0+IHtcblx0dmFyIFtjaHVua0lkcywgbW9yZU1vZHVsZXMsIHJ1bnRpbWVdID0gZGF0YTtcblx0Ly8gYWRkIFwibW9yZU1vZHVsZXNcIiB0byB0aGUgbW9kdWxlcyBvYmplY3QsXG5cdC8vIHRoZW4gZmxhZyBhbGwgXCJjaHVua0lkc1wiIGFzIGxvYWRlZCBhbmQgZmlyZSBjYWxsYmFja1xuXHR2YXIgbW9kdWxlSWQsIGNodW5rSWQsIGkgPSAwO1xuXHRpZihjaHVua0lkcy5zb21lKChpZCkgPT4gKGluc3RhbGxlZENodW5rc1tpZF0gIT09IDApKSkge1xuXHRcdGZvcihtb2R1bGVJZCBpbiBtb3JlTW9kdWxlcykge1xuXHRcdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKG1vcmVNb2R1bGVzLCBtb2R1bGVJZCkpIHtcblx0XHRcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tW21vZHVsZUlkXSA9IG1vcmVNb2R1bGVzW21vZHVsZUlkXTtcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYocnVudGltZSkgdmFyIHJlc3VsdCA9IHJ1bnRpbWUoX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cdH1cblx0aWYocGFyZW50Q2h1bmtMb2FkaW5nRnVuY3Rpb24pIHBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uKGRhdGEpO1xuXHRmb3IoO2kgPCBjaHVua0lkcy5sZW5ndGg7IGkrKykge1xuXHRcdGNodW5rSWQgPSBjaHVua0lkc1tpXTtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oaW5zdGFsbGVkQ2h1bmtzLCBjaHVua0lkKSAmJiBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0pIHtcblx0XHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkXVswXSgpO1xuXHRcdH1cblx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSAwO1xuXHR9XG5cdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fLk8ocmVzdWx0KTtcbn1cblxudmFyIGNodW5rTG9hZGluZ0dsb2JhbCA9IHNlbGZbXCJ3ZWJwYWNrQ2h1bmthcHBcIl0gPSBzZWxmW1wid2VicGFja0NodW5rYXBwXCJdIHx8IFtdO1xuY2h1bmtMb2FkaW5nR2xvYmFsLmZvckVhY2god2VicGFja0pzb25wQ2FsbGJhY2suYmluZChudWxsLCAwKSk7XG5jaHVua0xvYWRpbmdHbG9iYWwucHVzaCA9IHdlYnBhY2tKc29ucENhbGxiYWNrLmJpbmQobnVsbCwgY2h1bmtMb2FkaW5nR2xvYmFsLnB1c2guYmluZChjaHVua0xvYWRpbmdHbG9iYWwpKTsiLCIvLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8vIFRoaXMgZW50cnkgbW9kdWxlIGRlcGVuZHMgb24gb3RoZXIgbG9hZGVkIGNodW5rcyBhbmQgZXhlY3V0aW9uIG5lZWQgdG8gYmUgZGVsYXllZFxudmFyIF9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fLk8odW5kZWZpbmVkLCBbMjE2XSwgKCkgPT4gKF9fd2VicGFja19yZXF1aXJlX18oNjAxMSkpKVxuX193ZWJwYWNrX2V4cG9ydHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18uTyhfX3dlYnBhY2tfZXhwb3J0c19fKTtcbiJdLCJuYW1lcyI6WyJkZWZlcnJlZCIsImxlYWZQcm90b3R5cGVzIiwiZ2V0UHJvdG8iLCJCb29sZWFuIiwid2luZG93IiwibG9jYXRpb24iLCJob3N0bmFtZSIsIm1hdGNoIiwibWFrZVN0eWxlcyIsInRoZW1lIiwicm9vdCIsImhlaWdodCIsImRpc3BsYXkiLCJmbGV4RGlyZWN0aW9uIiwicm93IiwiY29sIiwibWFyZ2luIiwiYm9yZGVyIiwiZHJvcHpvbmUiLCJiYWNrZ3JvdW5kIiwiZ3JleSIsIndpZHRoIiwiZ2FwIiwiZ3JpZEF1dG9Sb3dzIiwidGhpbmdzIiwiZmxleFdyYXAiLCJ0aGluZyIsIm1pbkhlaWdodCIsIm1pbldpZHRoIiwiZm9udFdlaWdodCIsImJhY2tncm91bmRTaXplIiwianVzdGlmeUNvbnRlbnQiLCJhbGlnbkl0ZW1zIiwidXNlU3R5bGVzIiwiY3Vyc29yIiwiaXNEcmFnZ2luZyIsInByb3BzIiwiY2hpbGRyZW4iLCJpZCIsInR5cGUiLCJ1c2VEcmFnIiwiaXRlbSIsImNvbGxlY3QiLCJtb25pdG9yIiwiZHJhZyIsImNsYXNzZXMiLCJjbGFzc05hbWUiLCJyZWYiLCJpc092ZXIiLCJvbkRyb3AiLCJhY2NlcHQiLCJ1c2VEcm9wIiwiY2FuRHJvcCIsImRyb3AiLCJyb2xlIiwicm93cyIsImNvbHVtbnMiLCJwaWNzIiwiYXJhZ29ybiIsImJvcm9taXIiLCJsZWdvbGFzIiwiZ2FuZGFsZiIsImdpbWxpIiwiZnJvZG8iLCJzYW0iLCJtZXJyeSIsInBpcHBpbiIsIlJlYWN0Iiwic2V0VGhpbmdzIiwic3RhdGUiLCJzZXRTdGF0ZSIsIm1hcCIsImtleSIsImFyciIsImZpbHRlciIsInAiLCJfc3RhdGUiLCJfdGhpbmdzIiwidCIsInN0eWxlIiwiZ3JpZFRlbXBsYXRlQ29sdW1ucyIsIk1hdGgiLCJjZWlsIiwic3FydCIsImxlbmd0aCIsImdyaWRUZW1wbGF0ZVJvd3MiLCJwaWMiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJjcmVhdGVUaGVtZSIsIm11aUNhY2hlIiwiY3JlYXRlQ2FjaGUiLCJSZWFjdERPTSIsIkMiLCJ2YWx1ZSIsIlRoZW1lUHJvdmlkZXIiLCJEbmRQcm92aWRlciIsImJhY2tlbmQiLCJIVE1MNUJhY2tlbmQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwibmF2aWdhdG9yIiwic2VydmljZVdvcmtlciIsInJlYWR5IiwidGhlbiIsInJlZ2lzdHJhdGlvbiIsInVucmVnaXN0ZXIiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJ1bmRlZmluZWQiLCJleHBvcnRzIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsImNhbGwiLCJtIiwiTyIsInJlc3VsdCIsImNodW5rSWRzIiwiZm4iLCJwcmlvcml0eSIsIm5vdEZ1bGZpbGxlZCIsIkluZmluaXR5IiwiaSIsImZ1bGZpbGxlZCIsImoiLCJPYmplY3QiLCJrZXlzIiwiZXZlcnkiLCJzcGxpY2UiLCJyIiwibiIsImdldHRlciIsIl9fZXNNb2R1bGUiLCJkIiwiYSIsImdldFByb3RvdHlwZU9mIiwib2JqIiwibW9kZSIsInRoaXMiLCJucyIsImNyZWF0ZSIsImRlZiIsImN1cnJlbnQiLCJpbmRleE9mIiwiZ2V0T3duUHJvcGVydHlOYW1lcyIsImZvckVhY2giLCJkZWZpbml0aW9uIiwibyIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsImciLCJnbG9iYWxUaGlzIiwiRnVuY3Rpb24iLCJlIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJzY3JpcHRVcmwiLCJpbXBvcnRTY3JpcHRzIiwiY3VycmVudFNjcmlwdCIsInNyYyIsInNjcmlwdHMiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsIkVycm9yIiwicmVwbGFjZSIsImluc3RhbGxlZENodW5rcyIsImNodW5rSWQiLCJ3ZWJwYWNrSnNvbnBDYWxsYmFjayIsInBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uIiwiZGF0YSIsIm1vcmVNb2R1bGVzIiwicnVudGltZSIsInNvbWUiLCJjaHVua0xvYWRpbmdHbG9iYWwiLCJzZWxmIiwiYmluZCIsInB1c2giLCJfX3dlYnBhY2tfZXhwb3J0c19fIl0sInNvdXJjZVJvb3QiOiIifQ==